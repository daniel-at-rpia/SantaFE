<article
  [ngClass]="{
    'sat-securityTable': true,
    'sat-securityTable--showAddColumnDropdownState': tableData.state.isAddingColumn
  }">
  <section class="sat-securityTable__main">
    <div class="sat-securityTable__main-table">
      <div class="sat-securityTable__main-table-head">
        <div class="sat-securityTable__main-table-head-row">
          <article
            *ngFor="let eachHead of tableData.data.headers; let headIndex = index"
            [ngClass]="{
              'sat-securityTableHead': true,
              'sat-securityTableHead--securityCardVariant': headIndex === 0,
              'sat-securityTableHead--quantVariant': eachHead.state.isQuantVariant,
              'sat-securityTableHead--selectedState': tableData.state.selectedHeader === eachHead,
              'sat-securityTableHead--sortedState': tableData.state.sortedByHeader === eachHead
            }">
            <span class="sat-securityTableHead__text">{{eachHead.data.displayLabel}}</span>
            <button (click)="onClickHeaderCTA(eachHead)" class="sat-securityTableHead__cta">
              <i class="sat-securityTableHead__cta-icon fal fa-sort-amount-down">
                <div class="sat-securityTableHead__cta-icon-mask"></div>
              </i>
              <span class="sat-securityTableHead__cta-text">{{eachHead.data.displayLabel}}</span>
            </button>
            <div class="sat-securityTableHead__actionMenu">
              <button class="sat-securityTableHead__actionMenu-deleteBtn santaBtn--iconOnly fal fa-times"></button>
              <button (click)="onClickSortBy(eachHead)" class="sat-securityTableHead__actionMenu-sortBtn santaBtn--iconOnly fal fa-sort-amount-down"></button>
            </div>
          </article>
        </div>
      </div>
      <div class="sat-securityTable__main-table-body">
        <article
          *ngFor="let eachRow of tableData.data.rows; let rowIndex = index;"
          [ngClass]="{
            'sat-securityTableRow': true,
            'sat-securityTableRow--expandedState': eachRow.state.isExpanded
          }">
          <section (click)="onClickRowTableCanvas(eachRow)" class="sat-securityTableRow__tableCanvas">
            <article class="sat-securityTableCell sat-securityTableCell--securityCardVariant">
              <security-card [cardData]="eachRow.data.security"></security-card>
            </article>
            <article
              *ngFor="let eachCell of eachRow.data.cells"
              [ngClass]="{
                'sat-securityTableCell': true,
                'sat-securityTableCell--quantVariant': eachCell.state.isQuantVariant,
                'sat-securityTableCell--stencilState': eachCell.state.isStencil
              }">
              <section class="sat-securityTableCell__metric">
                <span class="sat-securityTableCell__metric-text">
                  {{eachCell.data.textData}}
                </span>
              </section>
              <section class="sat-securityTableCell__quant">
                <quant-comparer [quantData]="eachCell.data.quantComparerDTO"></quant-comparer>
              </section>
            </article>
          </section>
          <section class="sat-securityTableRow__expandCanvas">
            <div class="sat-securityTableRow__expandCanvas-content">
              <!--
                The ngIf optimizes the performance as it allows us to lazy-load the SecurityQuote components
              -->
              <div *ngIf="eachRow.state.isExpanded" class="sat-securityTableRow__expandCanvas-content-spacing"></div>
              <div class="sat-securityTableRow__expandCanvas-content-label">
                <article class="sat-securityTableRowExpandViewLabel">
                  <button class="sat-securityTableRowExpandViewLabel-cta santaBtn--small">Source</button>
                </article>
                <div class="sat-securityTableRow__expandCanvas-content-label-spacing"></div>
                <article class="sat-securityTableRowExpandViewLabel">
                  <button class="sat-securityTableRowExpandViewLabel-cta santaBtn--small">Dealer</button>
                </article>
                <div class="sat-securityTableRow__expandCanvas-content-label-spacing"></div>
                <article class="sat-securityTableRowExpandViewLabel sat-securityTableRowExpandViewLabel--long">
                  <button class="sat-securityTableRowExpandViewLabel-cta santaBtn--small">B Px</button>
                  <button class="sat-securityTableRowExpandViewLabel-cta santaBtn--small">A Px</button>
                </article>
                <div class="sat-securityTableRow__expandCanvas-content-label-spacing"></div>
                <article class="sat-securityTableRowExpandViewLabel sat-securityTableRowExpandViewLabel--long">
                  <button class="sat-securityTableRowExpandViewLabel-cta santaBtn--small">B YTW</button>
                  <button class="sat-securityTableRowExpandViewLabel-cta santaBtn--small">A YTW</button>
                </article>
                <div class="sat-securityTableRow__expandCanvas-content-label-spacing"></div>
                <article class="sat-securityTableRowExpandViewLabel sat-securityTableRowExpandViewLabel--long">
                  <button class="sat-securityTableRowExpandViewLabel-cta santaBtn--small">B Sprd</button>
                  <button class="sat-securityTableRowExpandViewLabel-cta santaBtn--small">A Sprd</button>
                </article>
                <div class="sat-securityTableRow__expandCanvas-content-label-spacing"></div>
                <article class="sat-securityTableRowExpandViewLabel sat-securityTableRowExpandViewLabel--veryLong">
                  <button class="sat-securityTableRowExpandViewLabel-cta santaBtn--small">B Size</button>
                  <button class="sat-securityTableRowExpandViewLabel-cta santaBtn--small">A Size</button>
                </article>
                <div class="sat-securityTableRow__expandCanvas-content-label-spacing"></div>
                <article class="sat-securityTableRowExpandViewLabel sat-securityTableRowExpandViewLabel--veryLong">Benchmarks</article>
              </div>
              <ul *ngIf="eachRow.state.isExpanded" class="sat-securityTableRow__expandCanvas-content-messageList">
                <security-quote
                  *ngFor="let eachMessage of eachRow.data.tradingMessages"
                  [messageData]="eachMessage">
                </security-quote>
              </ul>
              <button (click)="onClickCollapseExpandView(eachRow)" class="sat-securityTableRow__expandCanvas-content-collapseBtn santaBtn--iconOnly fal fa-times"></button>
            </div>
          </section>
        </article>
      </div>
      <button (click)="onClickAddColumn()" class="sat-securityTable__main-table-addColumnCTA santaBtn--labelled santaBtn--inverseLabelled">
        <i class="fal fa-plus"></i>
        <span>Add Column</span>
      </button>
      <div class="sat-securityTable__main-table-addColumnDropdown">
        <ul class="sat-securityTable__main-table-addColumnDropdown-optionList">
          <li class="sat-securityTable__main-table-addColumnDropdown-optionList-item">Rating</li>
          <li class="sat-securityTable__main-table-addColumnDropdown-optionList-item">Spread</li>
          <li class="sat-securityTable__main-table-addColumnDropdown-optionList-item">Tenor</li>
          <li class="sat-securityTable__main-table-addColumnDropdown-optionList-item">Yield</li>
          <li class="sat-securityTable__main-table-addColumnDropdown-optionList-item">Price</li>
          <li class="sat-securityTable__main-table-addColumnDropdown-optionList-item">Size</li>
          <li class="sat-securityTable__main-table-addColumnDropdown-optionList-item">Senority</li>
          <li class="sat-securityTable__main-table-addColumnDropdown-optionList-item">Obligor</li>
        </ul>
        <button (click)="onCollapseAddColumnDropdown()" class="sat-securityTable__main-table-addColumnDropdown-collapseBtn santaBtn--iconOnly santaBtn--small fal fa-times"></button>
      </div>
    </div>
  </section>
</article>