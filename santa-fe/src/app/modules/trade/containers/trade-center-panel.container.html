<article
  [ngClass]="{
    'sat-tradeCenterPanel': true,
    'sat-tradeCenterPanel--presetSelectedState': state.presets.selectedPreset,
    'sat-tradeCenterPanel--fetchDataFailedState': state.fetchResult.fetchTableDataFailed,
    'sat-tradeCenterPanel--boostConfiguratorState': state.configurator.boosted
  }">
  <section class="sat-tradeCenterPanel__presetsAndFilters">
    <div class="sat-tradeCenterPanel__presetsAndFilters-presets">
      <span class="sat-tradeCenterPanel__presetsAndFilters-presets-title">Select Preset</span>
      <ul class="sat-tradeCenterPanel__presetsAndFilters-presets-list">
        <li
          *ngFor="let eachShortcut of state.presets.shortcutList"
          [ngClass]="{
            'sat-tradeCenterPanel__presetsAndFilters-presets-list-item': true,
            'sat-tradeCenterPanel__presetsAndFilters-presets-list-item--selected': state.presets.selectedPreset === eachShortcut
          }">
          <search-shortcut
            [shortcutData]="eachShortcut"
            (onClickShortcutCallback)="onSelectPreset($event)"
          ></search-shortcut>
        </li>
      </ul>
    </div>
    <div class="sat-tradeCenterPanel__presetsAndFilters-configurator">
      <button (click)="onUnselectPreset()" class="sat-tradeCenterPanel__presetsAndFilters-configurator-backBtn">
        <i class="fal fa-chevron-left"></i>
        <span>Back to Presets</span>
      </button>
      <span class="sat-tradeCenterPanel__presetsAndFilters-configurator-title">Filter Securities</span>
      <security-definition-configurator
        [configuratorData]="state.configurator.dto"
        (clickedApplyFilter)="onApplyFilter($event)"
        (buryConfigurator)="buryConfigurator()"
        (boostConfigurator)="boostConfigurator()"
      ></security-definition-configurator>
    </div>
  </section>
  <section class="sat-tradeCenterPanel__result">
    <div class="sat-tradeCenterPanel__result-quickFilters">
      <div class="sat-tradeCenterPanel__result-quickFilters-row">
        <span class="sat-tradeCenterPanel__result-quickFilters-row-label">Metric :</span>
        <div class="santaBtnGroup">
          <button
            (click)="onSwitchMetric('Spread')"
            [ngClass]="{
              'sat-tradeCenterPanel__result-quickFilters-row-btn': true,
              'santaBtn--labelled': true,
              'sat-tradeCenterPanel__result-quickFilters-row-btn--active': state.filters.quickFilters.metricType === 'Spread'
            }">
            <i class="fal fa-ruler"></i>
            <span>Spread</span>
          </button>
          <button
            (click)="onSwitchMetric('Yield')"
            [ngClass]="{
              'sat-tradeCenterPanel__result-quickFilters-row-btn': true,
              'santaBtn--labelled': true,
              'sat-tradeCenterPanel__result-quickFilters-row-btn--active': state.filters.quickFilters.metricType === 'Yield'
            }">
            <i class="fal fa-ruler"></i>
            <span>Yield</span>
          </button>
          <button
            (click)="onSwitchMetric('Price')"
            [ngClass]="{
              'sat-tradeCenterPanel__result-quickFilters-row-btn': true,
              'santaBtn--labelled': true,
              'sat-tradeCenterPanel__result-quickFilters-row-btn--active': state.filters.quickFilters.metricType === 'Price'
            }">
            <i class="fal fa-ruler"></i>
            <span>Price</span>
          </button>
        </div>
      </div>
    </div>
    <div class="sat-tradeCenterPanel__result-errorPrompt">
      <i class="sat-tradeCenterPanel__result-errorPrompt-icon fal fa-sad-tear"></i>
      <span class="sat-tradeCenterPanel__result-errorPrompt-title">Backend request failed due to </span>
      <span class="sat-tradeCenterPanel__result-errorPrompt-errorText">{{state.fetchResult.fetchTableDataFailedError}}</span>
      <span class="sat-tradeCenterPanel__result-errorPrompt-errorText">If you are seeing it for the first time, it is likely caused by a security check. Click on this link to allow your browser talk to server:</span>
      <button (click)="openLinkForCertificate()">Link</button>
    </div>
    <div class="sat-tradeCenterPanel__result-table">
      <santa-table
        [tableData]="state.table.dto"
        [newRows]="state.fetchResult.rowList"
        [receivedContentStage]="state.currentContentStage"
        [receivedSecurityTableMetricsUpdate]="state.table.metrics"
        [liveUpdatedRows]="state.fetchResult.liveUpdatedRowList"
        [activeTriCoreMetric]="state.filters.quickFilters.metricType"
        (selectedSecurityForAnalysis)="onSelectSecurityForAnalysis($event)"
      ></santa-table>
    </div>
  </section>
</article>