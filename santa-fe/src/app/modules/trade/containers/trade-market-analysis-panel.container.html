<article
  [ngClass]="{
    'sat-tradeMarketAnalysisPanel': true,
    'sat-tradeMarketAnalysisPanel--hasSecurityState': state.receivedSecurity,
    'sat-tradeMarketAnalysisPanel--apiErrorState': state.apiErrorState
  }">
  <section class="sat-tradeMarketAnalysisPanel__timeScope">
    <span class="sat-tradeMarketAnalysisPanel__timeScope-label">Time Scope :</span>
    <ul class="sat-tradeMarketAnalysisPanel__timeScope-list">
      <button
        (click)="onClickTimeScope('Yoy')"
        [ngClass]="{
          'sat-tradeMarketAnalysisPanel__timeScope-list-item': true,
          'sat-tradeMarketAnalysisPanel__timeScope-list-item--selected': state.config.timeScope === 'Yoy'
        }">
        YoY
      </button>
      <button
        (click)="onClickTimeScope('Ytd')"
        [ngClass]="{
          'sat-tradeMarketAnalysisPanel__timeScope-list-item': true,
          'sat-tradeMarketAnalysisPanel__timeScope-list-item--selected': state.config.timeScope === 'Ytd'
        }">
        YtD
      </button>
      <button
        (click)="onClickTimeScope('Mom')"
        [ngClass]="{
          'sat-tradeMarketAnalysisPanel__timeScope-list-item': true,
          'sat-tradeMarketAnalysisPanel__timeScope-list-item--selected': state.config.timeScope === 'Mom'
        }">
        MoM
      </button>
      <button
        (click)="onClickTimeScope('Wow')"
        [ngClass]="{
          'sat-tradeMarketAnalysisPanel__timeScope-list-item': true,
          'sat-tradeMarketAnalysisPanel__timeScope-list-item--selected': state.config.timeScope === 'Wow'
        }">
        WoW
      </button>
    </ul>
  </section>
  <section class="sat-tradeMarketAnalysisPanel__group">
    <span class="sat-tradeMarketAnalysisPanel__group-label">Filter By :</span>
    <ul class="sat-tradeMarketAnalysisPanel__group-optionList">
      <li class="sat-tradeMarketAnalysisPanel__group-optionList-item" *ngFor="let eachDefinition of state.config.groupByOptions">
        <security-definition
          [definitionData]="eachDefinition"
          [selected]="state.config.activeOptions.indexOf(eachDefinition) >= 0"
          (onClick)="onClickGroupByOption($event)">
        </security-definition>
      </li>
    </ul>
  </section>
  <section class="sat-tradeMarketAnalysisPanel__tableHeader">
    <span class="sat-tradeMarketAnalysisPanel__tableHeader-securityList">Security</span>
    <span class="sat-tradeMarketAnalysisPanel__tableHeader-rankingList">Ranking</span>
    <span class="sat-tradeMarketAnalysisPanel__tableHeader-levelDistance">Δ GSpread</span>
    <span class="sat-tradeMarketAnalysisPanel__tableHeader-levelColumn">Level</span>
    <span class="sat-tradeMarketAnalysisPanel__tableHeader-levelDistance">Δ Basis</span>
    <span class="sat-tradeMarketAnalysisPanel__tableHeader-basisColumn">Basis</span>
  </section>
  <section class="sat-tradeMarketAnalysisPanel__table">
    <div class="sat-tradeMarketAnalysisPanel__table-content">
      <ul class="sat-tradeMarketAnalysisPanel__table-content-securityList">
        <li
          *ngFor="let eachCard of state.table.presentList; let rowIndex = index;"
          [ngClass]="{
            'sat-tradeMarketAnalysisPanel__table-content-securityList-item': true,
            'sat-tradeMarketAnalysisPanel__table-content-securityList-item--even': rowIndex%2 === 0
          }">
          <span title="number of securities in this group" class="sat-tradeMarketAnalysisPanel__table-content-securityList-item-numberOfSecurityTag" *ngIf="rowIndex === 1">{{state.table.numOfSecurities}}</span>
          <security-card [cardData]="eachCard"></security-card>
        </li>
      </ul>
      <ul class="sat-tradeMarketAnalysisPanel__table-content-rankingList">
        <li
          *ngFor="let eachRanking of state.table.rankingList; let rowIndex = index;"
          [ngClass]="{
            'sat-tradeMarketAnalysisPanel__table-content-rankingList-item': true,
            'sat-tradeMarketAnalysisPanel__table-content-rankingList-item--even': rowIndex%2 === 0
          }">
          <span class="sat-tradeMarketAnalysisPanel__table-content-rankingList-item-text">{{eachRanking}}</span>
        </li>
      </ul>
      <div class="sat-tradeMarketAnalysisPanel__table-content-separator"></div>
      <ul class="sat-tradeMarketAnalysisPanel__table-content-levelDistance">
        <li
          *ngFor="let eachDistance of state.table.moveDistanceLevelList; let rowIndex = index;"
          [ngClass]="{
            'sat-tradeMarketAnalysisPanel__table-content-levelDistance-item': true,
            'sat-tradeMarketAnalysisPanel__table-content-levelDistance-item--even': rowIndex%2 === 0,
            'sat-tradeMarketAnalysisPanel__table-content-levelDistance-item--positive': eachDistance > 0
          }">
          <span class="sat-tradeMarketAnalysisPanel__table-content-levelDistance-item-text">{{eachDistance}}</span>
        </li>
      </ul>
      <div class="sat-tradeMarketAnalysisPanel__table-content-separator"></div>
      <div class="sat-tradeMarketAnalysisPanel__table-content-levelColumn">
        <historical-summary *ngIf="state.table.levelSummary" [summaryData]="state.table.levelSummary"></historical-summary>
      </div>
      <div class="sat-tradeMarketAnalysisPanel__table-content-separator"></div>
      <ul class="sat-tradeMarketAnalysisPanel__table-content-basisDistance">
        <li
          *ngFor="let eachDistance of state.table.moveDistanceBasisList; let rowIndex = index;"
          [ngClass]="{
            'sat-tradeMarketAnalysisPanel__table-content-basisDistance-item': true,
            'sat-tradeMarketAnalysisPanel__table-content-basisDistance-item--even': rowIndex%2 === 0,
            'sat-tradeMarketAnalysisPanel__table-content-basisDistance-item--positive': eachDistance > 0
          }">
          <span class="sat-tradeMarketAnalysisPanel__table-content-basisDistance-item-text">{{eachDistance}}</span>
        </li>
      </ul>
      <div class="sat-tradeMarketAnalysisPanel__table-content-separator"></div>
      <div class="sat-tradeMarketAnalysisPanel__table-content-basisColumn">
        <historical-summary *ngIf="state.table.basisSummary" [summaryData]="state.table.basisSummary"></historical-summary>
      </div>
    </div>
  </section>
  <section class="sat-tradeMarketAnalysisPanel__errorPrompt">
    <i class="sat-tradeMarketAnalysisPanel__errorPrompt-icon fal fa-sad-tear"></i>
    <span class="sat-tradeMarketAnalysisPanel__errorPrompt-title">Failed to retrieve data</span>
  </section>
</article>